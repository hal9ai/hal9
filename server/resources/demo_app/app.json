{
  "id": 8025092,
  "steps": [
    {
      "name": "species_dropdown",
      "function": "dropdown",
      "source": "controls/dropdown.html",
      "language": "html",
      "label": "Dropdown",
      "description": "Embed a dropdown control",
      "icon": "fa-light fa-list-dropdown",
      "dragdrop": true,
      "build": "true",
      "id": 11105,
      "params": {
        "values": {
          "id": 1,
          "static": true,
          "value": [
            {
              "control": "textbox",
              "value": "asdf",
              "id": 0
            }
          ],
          "name": "values",
          "label": "Values"
        }
      },
      "header": {
        "input": [],
        "params": [
          {
            "name": "values",
            "label": "Values",
            "value": [
              {
                "control": "textbox",
                "value": "versicolor,setosa,virginica"
              }
            ]
          }
        ],
        "output": [
          "dropdown",
          "html"
        ],
        "events": [
          "on_update"
        ],
        "interactive": true,
        "layout": [
          {
            "width": "inner",
            "height": "40px"
          }
        ],
        "deps": [],
        "environment": null,
        "cache": false,
        "invalid": null
      }
    },
    {
      "name": "iris_table",
      "function": "",
      "source": "controls/rawhtml.js",
      "language": "javascript",
      "label": "HTML",
      "description": "Enables to render arbitrary HTML",
      "icon": "fa-brands fa-html5",
      "dragdrop": true,
      "build": "false",
      "id": 11106,
      "params": {},
      "header": {
        "input": [
          "rawhtml"
        ],
        "output": [
          "html"
        ],
        "layout": [
          {
            "width": "900px"
          }
        ],
        "params": [],
        "deps": [],
        "environment": null,
        "cache": false,
        "invalid": null
      }
    },
    {
      "name": "slider_rows",
      "function": "slider",
      "source": "controls/range.html",
      "language": "html",
      "label": "Slider",
      "description": "Embed an slider element",
      "icon": "fa-light fa-slider",
      "dragdrop": true,
      "build": "true",
      "id": 11107,
      "params": {
        "value": {
          "id": 1,
          "static": true,
          "value": [
            {
              "control": "number",
              "value": 1,
              "id": 0
            }
          ],
          "name": "value",
          "label": "Default Value"
        },
        "min": {
          "id": 3,
          "static": true,
          "value": [
            {
              "control": "number",
              "value": 1,
              "id": 2
            }
          ],
          "name": "min",
          "label": "Min Value"
        },
        "max": {
          "id": 5,
          "static": true,
          "value": [
            {
              "control": "number",
              "value": 10,
              "id": 4
            }
          ],
          "name": "max",
          "label": "Max Value"
        },
        "step": {
          "id": 7,
          "static": true,
          "value": [
            {
              "control": "number",
              "value": 1,
              "id": 6
            }
          ],
          "name": "step",
          "label": "Step Increment"
        }
      },
      "header": {
        "input": [],
        "params": [
          {
            "name": "value",
            "label": "Default Value",
            "value": [
              {
                "control": "number",
                "value": 1
              }
            ]
          },
          {
            "name": "min",
            "label": "Min Value",
            "value": [
              {
                "control": "number",
                "value": 1
              }
            ]
          },
          {
            "name": "max",
            "label": "Max Value",
            "value": [
              {
                "control": "number",
                "value": 10
              }
            ]
          },
          {
            "name": "step",
            "label": "Step Increment",
            "value": [
              {
                "control": "number",
                "value": 1
              }
            ]
          }
        ],
        "output": [
          "html",
          "slider"
        ],
        "events": [
          "on_update"
        ],
        "interactive": true,
        "layout": [
          {
            "width": "325px",
            "height": "70px"
          }
        ],
        "deps": [],
        "environment": null,
        "cache": false,
        "invalid": null
      }
    }
  ],
  "params": {
    "11105": {
      "values": {
        "id": 1,
        "static": true,
        "value": [
          {
            "control": "textbox",
            "value": "asdf",
            "id": 0
          }
        ],
        "name": "values",
        "label": "Values"
      }
    },
    "11106": {},
    "11107": {
      "value": {
        "id": 1,
        "static": true,
        "value": [
          {
            "control": "number",
            "value": 1,
            "id": 0
          }
        ],
        "name": "value",
        "label": "Default Value"
      },
      "min": {
        "id": 3,
        "static": true,
        "value": [
          {
            "control": "number",
            "value": 1,
            "id": 2
          }
        ],
        "name": "min",
        "label": "Min Value"
      },
      "max": {
        "id": 5,
        "static": true,
        "value": [
          {
            "control": "number",
            "value": 10,
            "id": 4
          }
        ],
        "name": "max",
        "label": "Max Value"
      },
      "step": {
        "id": 7,
        "static": true,
        "value": [
          {
            "control": "number",
            "value": 1,
            "id": 6
          }
        ],
        "name": "step",
        "label": "Step Increment"
      }
    }
  },
  "scripts": {
    "11105": "<!--\n  input: []\n  params:\n    - name: values\n      label: Values\n      value:\n        - control: textbox\n          value: versicolor,setosa,virginica\n  output: [ dropdown, html ]\n  events: [ on_update ]\n  interactive: true\n  layout:\n    - width: inner\n      height: 40px\n-->\n\n<script src=\"https://cdn.jsdelivr.net/npm/vue@2\"></script>\n<link rel=\"stylesheet\" href=\"https://unpkg.com/buefy/dist/buefy.min.css\">\n<script src=\"https://unpkg.com/buefy/dist/buefy.min.js\"></script>\n\n<div class=\"control\">\n  <template>\n    <section>\n      <b-select v-model=\"value\">\n        <option v-for=\"o in options\" :value='o'>\n          {{ o }}\n        </option>\n      </b-select>\n    </section>\n  </template>\n</div>\n\n<script>\n  values = typeof(values) === 'object' ? values : values.split(',');\n  var dropdown = hal9.get('dropdown');\n\n  var app = new Vue({\n    el: html.getElementsByClassName('control')[0],\n    data: function() {\n      var vue = this;\n\n      hal9.onEvent('onParams', function(param, values) {\n        if (param != 'values') return;\n        vue.options = typeof(values) === 'object' ? values : values.split(',');\n      })\n\n      return {\n        value: dropdown,\n        options: values\n      }\n    },\n    watch: {\n      value: function(value) {\n        hal9.set('dropdown', value);\n      }\n    }\n  })\n\n  html.style.height = '40px';\n</script>",
    "11106": "/**\n  input: [ rawhtml ]\n  output: [ html ]\n  layout:\n    - width: 900px\n**/\n\nhtml.innerHTML = rawhtml;\n",
    "11107": "<!--\n  input: []\n  params:\n    - name: value\n      label: Default Value\n      value:\n        - control: number\n          value: 1\n    - name: min\n      label: Min Value\n      value:\n        - control: number\n          value: 1\n    - name: max\n      label: Max Value\n      value:\n        - control: number\n          value: 10\n    - name: step\n      label: Step Increment\n      value:\n        - control: number\n          value: 1\n  output: [ html, slider ]\n  events: [ on_update ]\n  interactive: true\n  layout:\n    - width: 325px\n      height: 70px\n-->\n\n<script src=\"https://cdn.jsdelivr.net/npm/vue@2\"></script>\n<link rel=\"stylesheet\" href=\"https://unpkg.com/buefy/dist/buefy.min.css\">\n<script src=\"https://unpkg.com/buefy/dist/buefy.min.js\"></script>\n\n<div class=\"sliderContainer\">\n  <template>\n    <section>\n      <div style= \"height: 30px\"></div>\n        <b-field>\n            <b-slider tooltip-always :min=\"min\" :max=\"max\" :step=\"step\" v-model=\"value\"></b-slider>\n        </b-field>\n    </section>\n  </template>\n</div>\n\n<script>\n  var slider = hal9.get('slider');\n\n  var app = new Vue({\n    el: html.getElementsByClassName('sliderContainer')[0],\n    data: {\n      value: parseFloat(slider),\n      min: parseFloat(min),\n      max: parseFloat(max),\n      step: parseFloat(step)\n    },\n    watch: {\n      value: function(value) {\n        hal9.set('slider', value);\n      }\n    }\n  })\n\n  app.$el.getElementsByClassName('b-slider-track')[0].style = 'width: 300px';\n  app.$el.getElementsByClassName('b-slider-track')[0].style.left = \"16px\";\n\n  let sliderNumber = app.$el.getElementsByClassName('tooltip-content')[0];\n\n  let minMaxStep = app.$el.getElementsByClassName('b-slider-thumb')[0];\n  minMaxStep.setAttribute('aria-valuemin', 3);\n</script>"
  },
  "version": "0.0.1",
  "metadata": {
    "defaultMode": "app"
  },
  "app": {
    "stepLayouts": [
      {
        "stepId": 11105,
        "width": "131px",
        "left": "0px",
        "height": "40px",
        "top": "30px"
      },
      {
        "stepId": 11106,
        "width": "456px",
        "left": "0px",
        "height": "371px",
        "top": "76px"
      },
      {
        "stepId": 11107,
        "width": "317px",
        "left": "139px",
        "height": "70px",
        "top": "0px"
      }
    ]
  },
  "deps": {
    "11106": [
      11105,
      11107
    ]
  },
  "runtimes": [
    {
      "name": "r",
      "implementation": "server",
      "platform": "r",
      "script": "R/backend.R",
      "files": {
        "R/backend.R": "library(hal9)\n\niris |> h9_set(\"df\")\n\nh9_dropdown(\n    \"species_dropdown\",\n    values = unique(levels(iris$Species)),\n    on_update = function(value) {\n        h9_set(value, \"selected_species\")\n    }\n)\n\nh9_html(\n    \"iris_table\",\n    rawhtml = function() {\n        sp <- h9_get(\"selected_species\")\n        if (is.null(sp)) {\n            return(\"\")\n        }\n\n        out <- iris[iris$Species == sp, ]\n\n        num_rows <- h9_get(\"num_rows\")\n\n        if (!is.null(num_rows)) {\n            out <- out |> head(num_rows)\n        }\n\n        out |>\n            knitr::kable(format = \"html\") |>\n            as.character()\n    }\n)\n\nh9_slider(\"slider_rows\",\n    value = 1,\n    min = 1,\n    max = 10,\n    step = 1,\n    on_update = function(value) {\n        h9_set(value, \"num_rows\")\n    }\n)\n"
      }
    }
  ],
  "state": {
    "steps": {
      "11105": {
        "api": {
          "dropdown": "setosa"
        }
      },
      "11107": {
        "api": {
          "slider": 8
        }
      }
    }
  }
}
